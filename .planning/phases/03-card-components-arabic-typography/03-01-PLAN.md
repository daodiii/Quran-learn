---
phase: 03-card-components-arabic-typography
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/cards/CardGrid.astro
  - src/components/cards/CourseCard.astro
  - src/components/cards/LessonCard.astro
  - src/components/cards/SurahCard.astro
  - src/components/cards/ResourceCard.astro
autonomous: true

must_haves:
  truths:
    - "CourseCard displays course title, level badge, and progress bar"
    - "LessonCard displays lesson title, Arabic title, level badge, and completion checkmark"
    - "SurahCard displays surah name with Arabic and difficulty badge"
    - "ResourceCard displays resource title with icon"
    - "CardGrid arranges cards in 1-3 columns based on viewport width"
    - "Arabic text wraps correctly without breaking mid-word"
  artifacts:
    - path: "src/components/cards/CardGrid.astro"
      provides: "Responsive CSS Grid wrapper component"
      exports: ["CardGrid"]
    - path: "src/components/cards/CourseCard.astro"
      provides: "Course card with progress integration"
      exports: ["CourseCard"]
    - path: "src/components/cards/LessonCard.astro"
      provides: "Lesson card with checkmark and Arabic title"
      exports: ["LessonCard"]
    - path: "src/components/cards/SurahCard.astro"
      provides: "Surah card with difficulty badge"
      exports: ["SurahCard"]
    - path: "src/components/cards/ResourceCard.astro"
      provides: "Resource card with icon slot"
      exports: ["ResourceCard"]
  key_links:
    - from: "src/components/cards/CourseCard.astro"
      to: "src/components/primitives/Card.astro"
      via: "import composition"
      pattern: "import Card from"
    - from: "src/components/cards/LessonCard.astro"
      to: "src/components/progress/LessonCheckmark.astro"
      via: "import composition"
      pattern: "import LessonCheckmark from"
    - from: "src/components/cards/CourseCard.astro"
      to: "src/components/progress/ProgressBar.astro"
      via: "import composition"
      pattern: "import ProgressBar from"
---

<objective>
Create specialized card components (CourseCard, LessonCard, SurahCard, ResourceCard) that compose the primitive Card.astro with domain-specific layouts, and a CardGrid utility for responsive 1-3 column layouts.

Purpose: Provide reusable card components for Phase 6 page redesigns with proper Arabic text handling and progress indicator integration.

Output: 5 new Astro components in src/components/cards/ directory.
</objective>

<execution_context>
@/Users/daodilyas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/daodilyas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/daodilyas/quran-learn/.planning/PROJECT.md
@/Users/daodilyas/quran-learn/.planning/ROADMAP.md
@/Users/daodilyas/quran-learn/.planning/STATE.md
@/Users/daodilyas/quran-learn/.planning/phases/03-card-components-arabic-typography/03-RESEARCH.md

# Existing primitives to compose
@/Users/daodilyas/quran-learn/src/components/primitives/Card.astro
@/Users/daodilyas/quran-learn/src/components/primitives/Badge.astro
@/Users/daodilyas/quran-learn/src/components/progress/ProgressBar.astro
@/Users/daodilyas/quran-learn/src/components/progress/ProgressRing.astro
@/Users/daodilyas/quran-learn/src/components/progress/LessonCheckmark.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CardGrid utility component</name>
  <files>src/components/cards/CardGrid.astro</files>
  <action>
Create responsive grid wrapper component with CSS Grid auto-fit pattern:

```astro
---
interface Props {
  minCardWidth?: number;  // Minimum card width in px (default: 300)
  gap?: 'sm' | 'md' | 'lg';  // Gap between cards (default: 'md')
  class?: string;
}

const {
  minCardWidth = 300,
  gap = 'md',
  class: className = ''
} = Astro.props;
---

<div class={`card-grid card-grid-gap-${gap} ${className}`} style={`--min-card-width: ${minCardWidth}px`}>
  <slot />
</div>
```

CSS requirements:
- Use `grid-template-columns: repeat(auto-fit, minmax(var(--min-card-width), 1fr))`
- Gap variants: sm=var(--spacing-md), md=clamp(1rem, 3vw, 2rem), lg=var(--spacing-xl)
- Use CSS logical properties (inline-size: 100%)
- On containers <400px wide, force single column with `@container` query (fallback to @media if needed)
  </action>
  <verify>File exists at src/components/cards/CardGrid.astro with correct interface and CSS Grid implementation</verify>
  <done>CardGrid component renders responsive 1-3 column layouts based on viewport width</done>
</task>

<task type="auto">
  <name>Task 2: Create CourseCard and LessonCard components</name>
  <files>src/components/cards/CourseCard.astro, src/components/cards/LessonCard.astro</files>
  <action>
**CourseCard.astro** - For level/course overview pages:

```astro
interface Props {
  title: string;
  level: 1 | 2 | 3 | 4 | 5;
  lessonsCompleted: number;
  totalLessons: number;
  href: string;
  class?: string;
}
```

Structure:
1. Compose Card with variant="elevated" and clickable href
2. Header row: course title (h3) + Badge with level
3. Progress section: "{X} of {Y} lessons" text + ProgressBar (height="sm")
4. Description slot for optional course description
5. Use CSS logical properties throughout

**LessonCard.astro** - For lesson listings:

```astro
interface Props {
  title: string;
  titleArabic?: string;
  level: 1 | 2 | 3 | 4 | 5;
  completed: boolean;
  href: string;
  class?: string;
}
```

Structure:
1. Compose Card with variant="elevated" and clickable href
2. Header row: LessonCheckmark + Badge with level
3. Content: English title (h3) + Arabic title (p with dir="rtl" lang="ar")
4. Description slot for lesson summary

**Critical Arabic typography for LessonCard:**
```css
.lesson-title-arabic {
  font-family: 'Amiri', serif;
  direction: rtl;
  text-align: start;
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: none;
  letter-spacing: 0;
}
```

Both cards must:
- Import and compose primitive Card.astro
- Use design tokens only (no hardcoded colors/spacing)
- Support prefers-reduced-motion
- Use CSS logical properties (margin-block-end, padding-inline)
  </action>
  <verify>Both files exist with correct Props interfaces, Card composition imports, and Arabic typography CSS in LessonCard</verify>
  <done>CourseCard shows progress bar, LessonCard shows checkmark and Arabic title with safe text wrapping</done>
</task>

<task type="auto">
  <name>Task 3: Create SurahCard and ResourceCard components</name>
  <files>src/components/cards/SurahCard.astro, src/components/cards/ResourceCard.astro</files>
  <action>
**SurahCard.astro** - For surah selector grid:

```astro
interface Props {
  name: string;           // English name (e.g., "Al-Fatiha")
  nameArabic: string;     // Arabic name (e.g., "الفاتحة")
  number: number;         // Surah number (1-114)
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  verseCount?: number;
  href: string;
  class?: string;
}
```

Structure:
1. Compose Card with variant="elevated" and clickable href
2. Header row: Surah number badge + difficulty Badge (use variant mapping: beginner=success, intermediate=warning, advanced=error)
3. Content: Arabic name large (h3 with Amiri font, dir="rtl") + English name below
4. Footer: "{X} verses" if verseCount provided

**ResourceCard.astro** - For reference materials:

```astro
interface Props {
  title: string;
  description?: string;
  href: string;
  class?: string;
}
```

Structure:
1. Compose Card with variant="outlined" and clickable href
2. Icon slot (named slot "icon") for resource type icon
3. Title (h3) + description (p)
4. Visual indicator for external links if href contains "http"

Both cards must:
- Use Arabic typography rules for any Arabic text containers
- Compose primitive Card.astro
- Use design tokens only
- Support dark mode via existing Card hover token (--shadow-medium)
  </action>
  <verify>Both files exist with correct Props interfaces, Card composition, and Arabic typography where applicable</verify>
  <done>SurahCard displays Arabic/English names with difficulty badge, ResourceCard displays title with icon slot</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Directory structure check:
```bash
ls -la src/components/cards/
# Should show: CardGrid.astro, CourseCard.astro, LessonCard.astro, SurahCard.astro, ResourceCard.astro
```

2. Import validation:
```bash
grep -l "import Card from" src/components/cards/*.astro
# All 4 specialized cards should import Card primitive
```

3. Arabic typography check:
```bash
grep -l "overflow-wrap: break-word" src/components/cards/*.astro
# LessonCard and SurahCard should have Arabic typography rules
```

4. TypeScript check:
```bash
cd /Users/daodilyas/quran-learn && npx astro check 2>&1 | head -20
# No TypeScript errors in new components
```
</verification>

<success_criteria>
- 5 new components created in src/components/cards/
- All specialized cards compose the primitive Card.astro (not duplicate)
- CourseCard integrates ProgressBar component
- LessonCard integrates LessonCheckmark component
- Arabic text uses overflow-wrap: break-word (never word-break: break-all)
- CSS Grid pattern uses repeat(auto-fit, minmax()) for responsive layouts
- All components use CSS logical properties for RTL support
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-card-components-arabic-typography/03-01-SUMMARY.md`
</output>
