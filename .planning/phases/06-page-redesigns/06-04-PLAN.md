---
phase: 06-page-redesigns
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/surahs/index.astro
autonomous: true

must_haves:
  truths:
    - "Surah selector displays all surahs as SurahCard components"
    - "Surahs grouped by difficulty (beginner, intermediate, advanced)"
    - "Each card shows Arabic name, English name, verse count"
    - "Difficulty badges use correct semantic colors"
    - "Page has clear header with section purpose"
  artifacts:
    - path: "src/pages/surahs/index.astro"
      provides: "Card-based surah selector"
      contains: "SurahCard"
  key_links:
    - from: "src/pages/surahs/index.astro"
      to: "src/components/cards/SurahCard.astro"
      via: "import"
      pattern: "import SurahCard"
    - from: "src/pages/surahs/index.astro"
      to: "src/components/cards/CardGrid.astro"
      via: "layout wrapper"
      pattern: "import CardGrid"
---

<objective>
Redesign the surah selector page with card-based layout grouped by difficulty.

Purpose: The surah selector helps learners find appropriate surahs for their level. Grouping by difficulty with visual badges makes selection intuitive.
Output: Redesigned surahs/index.astro using SurahCard, CardGrid, and design tokens
</objective>

<execution_context>
@/Users/daodilyas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/daodilyas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-page-redesigns/06-RESEARCH.md
@src/pages/surahs/index.astro
@src/components/cards/SurahCard.astro
@src/components/cards/CardGrid.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign Surah Selector with Page Header</name>
  <files>src/pages/surahs/index.astro</files>
  <action>
Refactor surahs/index.astro with clean page header and component imports:

1. Update imports at top of file:
   ```astro
   ---
   import BaseLayout from '../../layouts/BaseLayout.astro';
   import CardGrid from '../../components/cards/CardGrid.astro';
   import SurahCard from '../../components/cards/SurahCard.astro';
   import { getCollection } from 'astro:content';

   const allSurahs = await getCollection('surahs');
   const sortedSurahs = allSurahs.sort((a, b) => a.data.surahNumber - b.data.surahNumber);

   // Group by difficulty
   const beginnerSurahs = sortedSurahs.filter(s => s.data.difficulty === 'beginner');
   const intermediateSurahs = sortedSurahs.filter(s => s.data.difficulty === 'intermediate');
   const advancedSurahs = sortedSurahs.filter(s => s.data.difficulty === 'advanced');
   ---
   ```

2. Create page structure with header:
   ```astro
   <BaseLayout title="Surah Breakdowns">
     <div class="surahs-page">
       <header class="page-header">
         <h1 class="page-title">Surah Breakdowns</h1>
         <p class="page-subtitle">
           Detailed word-by-word grammatical analysis of Quranic chapters.
           Start with beginner surahs for foundational patterns.
         </p>
       </header>

       <!-- Difficulty sections will go here -->

     </div>
   </BaseLayout>
   ```

3. Add page styling using design tokens:
   ```css
   .surahs-page {
     max-inline-size: 80rem;
     margin-inline: auto;
     padding: var(--spacing-xl) var(--spacing-md);
   }

   .page-header {
     margin-block-end: var(--spacing-xl);
     max-inline-size: 640px;
   }

   .page-title {
     font-size: clamp(1.75rem, 4vw, 2.25rem);
     font-weight: 700;
     color: var(--text-primary);
     margin-block-end: var(--spacing-sm);
   }

   .page-subtitle {
     font-size: 1rem;
     color: var(--text-secondary);
     line-height: 1.6;
   }
   ```
  </action>
  <verify>
Run `npm run build` - verify import structure is correct.
Page header should render with title and subtitle.
  </verify>
  <done>
Surah page has clean header with title and description.
Content collections imported correctly.
Surahs grouped by difficulty in variables.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Difficulty-Grouped Surah Sections</name>
  <files>src/pages/surahs/index.astro</files>
  <action>
Add three sections for beginner, intermediate, and advanced surahs:

1. Create difficulty section component pattern:
   ```astro
   <!-- Beginner Section -->
   <section class="difficulty-section" id="beginner">
     <div class="section-header">
       <h2 class="section-title">
         <span class="difficulty-badge difficulty-beginner">Beginner</span>
         Starting Points
       </h2>
       <p class="section-desc">
         Short surahs with clear grammatical structures. Ideal for building foundational analysis skills.
       </p>
     </div>

     <CardGrid gap="md">
       {beginnerSurahs.map(surah => (
         <SurahCard
           name={surah.data.name}
           nameArabic={surah.data.nameArabic}
           number={surah.data.surahNumber}
           difficulty="beginner"
           verseCount={surah.data.verseCount}
           href={`/surahs/${surah.id}/`}
         />
       ))}
     </CardGrid>
   </section>

   <!-- Intermediate Section -->
   <section class="difficulty-section" id="intermediate">
     <div class="section-header">
       <h2 class="section-title">
         <span class="difficulty-badge difficulty-intermediate">Intermediate</span>
         Building Complexity
       </h2>
       <p class="section-desc">
         Longer surahs with varied sentence structures. Practice I'rab identification and verb analysis.
       </p>
     </div>

     <CardGrid gap="md">
       {intermediateSurahs.map(surah => (
         <SurahCard
           name={surah.data.name}
           nameArabic={surah.data.nameArabic}
           number={surah.data.surahNumber}
           difficulty="intermediate"
           verseCount={surah.data.verseCount}
           href={`/surahs/${surah.id}/`}
         />
       ))}
     </CardGrid>
   </section>

   <!-- Advanced Section -->
   <section class="difficulty-section" id="advanced">
     <div class="section-header">
       <h2 class="section-title">
         <span class="difficulty-badge difficulty-advanced">Advanced</span>
         Complex Analysis
       </h2>
       <p class="section-desc">
         Complex grammatical patterns including conditional sentences, rhetorical devices, and intricate I'rab.
       </p>
     </div>

     <CardGrid gap="md">
       {advancedSurahs.map(surah => (
         <SurahCard
           name={surah.data.name}
           nameArabic={surah.data.nameArabic}
           number={surah.data.surahNumber}
           difficulty="advanced"
           verseCount={surah.data.verseCount}
           href={`/surahs/${surah.id}/`}
         />
       ))}
     </CardGrid>
   </section>
   ```

2. Add section styling:
   ```css
   .difficulty-section {
     margin-block-end: var(--spacing-2xl);
   }

   .section-header {
     margin-block-end: var(--spacing-lg);
   }

   .section-title {
     font-size: 1.5rem;
     font-weight: 700;
     color: var(--text-primary);
     display: flex;
     align-items: center;
     gap: var(--spacing-sm);
     margin-block-end: var(--spacing-xs);
   }

   .section-desc {
     font-size: 0.9375rem;
     color: var(--text-secondary);
     line-height: 1.5;
   }

   .difficulty-badge {
     display: inline-flex;
     padding: var(--spacing-xs) var(--spacing-sm);
     border-radius: var(--radius-sm);
     font-size: 0.75rem;
     font-weight: 600;
     text-transform: uppercase;
   }

   .difficulty-beginner {
     background: var(--color-success-light);
     color: var(--color-success);
   }

   .difficulty-intermediate {
     background: var(--color-warning-light);
     color: var(--color-warning);
   }

   .difficulty-advanced {
     background: var(--color-error-light);
     color: var(--color-error);
   }

   [data-theme="dark"] .difficulty-beginner {
     background: rgba(16, 185, 129, 0.15);
   }

   [data-theme="dark"] .difficulty-intermediate {
     background: rgba(245, 158, 11, 0.15);
   }

   [data-theme="dark"] .difficulty-advanced {
     background: rgba(239, 68, 68, 0.15);
   }
   ```

3. Handle empty sections gracefully:
   ```astro
   {beginnerSurahs.length > 0 && (
     <section class="difficulty-section" id="beginner">
       <!-- content -->
     </section>
   )}
   ```
  </action>
  <verify>
Run `npm run build` - verify all surah pages generate.
Run `npm run dev` and check /surahs/ page shows three sections.
Each section should have appropriate badge color.
  </verify>
  <done>
Three difficulty sections display surahs grouped correctly.
Section badges use semantic colors (green/gold/red).
Empty sections are hidden gracefully.
Cards display in responsive grid.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Quick Navigation and Responsive Polish</name>
  <files>src/pages/surahs/index.astro</files>
  <action>
Add quick navigation to jump between difficulty sections:

1. Add quick nav below page header:
   ```astro
   <nav class="quick-nav" aria-label="Jump to difficulty level">
     <a href="#beginner" class="quick-nav-link quick-nav-beginner">
       Beginner ({beginnerSurahs.length})
     </a>
     <a href="#intermediate" class="quick-nav-link quick-nav-intermediate">
       Intermediate ({intermediateSurahs.length})
     </a>
     <a href="#advanced" class="quick-nav-link quick-nav-advanced">
       Advanced ({advancedSurahs.length})
     </a>
   </nav>
   ```

2. Style quick navigation:
   ```css
   .quick-nav {
     display: flex;
     flex-wrap: wrap;
     gap: var(--spacing-sm);
     margin-block-end: var(--spacing-xl);
   }

   .quick-nav-link {
     padding: var(--spacing-sm) var(--spacing-md);
     border-radius: var(--radius-md);
     font-size: 0.875rem;
     font-weight: 500;
     text-decoration: none;
     border: 1px solid var(--border-primary);
     transition: all var(--transition-fast);
   }

   .quick-nav-link:hover {
     border-color: var(--accent-primary);
   }

   .quick-nav-beginner:hover {
     background: var(--color-success-light);
     border-color: var(--color-success);
   }

   .quick-nav-intermediate:hover {
     background: var(--color-warning-light);
     border-color: var(--color-warning);
   }

   .quick-nav-advanced:hover {
     background: var(--color-error-light);
     border-color: var(--color-error);
   }
   ```

3. Add scroll-margin to sections for smooth anchor scrolling:
   ```css
   .difficulty-section {
     scroll-margin-block-start: var(--spacing-xl);
   }
   ```

4. Add responsive adjustments:
   ```css
   @media (max-width: 640px) {
     .page-title {
       font-size: 1.5rem;
     }

     .section-title {
       font-size: 1.25rem;
       flex-direction: column;
       align-items: flex-start;
       gap: var(--spacing-xs);
     }

     .quick-nav {
       justify-content: center;
     }
   }
   ```

5. Remove any old styling that's not using design tokens.
  </action>
  <verify>
Run `npm run dev` and test:
1. Click quick nav links - should scroll to sections
2. Test at mobile viewport (375px) - layout should adapt
3. Test dark mode - all colors should work
  </verify>
  <done>
Quick navigation allows jumping between difficulty levels.
Anchor scrolling works with proper offset.
Mobile layout adapts cleanly.
Dark mode works throughout.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` completes without errors
2. Surah selector shows all surahs in SurahCard format
3. Three difficulty sections with appropriate badges
4. Quick navigation enables jumping between sections
5. Responsive layout works on mobile
6. Dark mode works throughout
</verification>

<success_criteria>
- SURAH-01 satisfied: Card-based surah selector with difficulty badges
- All surahs from content collection displayed
- Difficulty grouping helps learners choose appropriate content
- Design tokens used consistently
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-page-redesigns/06-04-SUMMARY.md`
</output>
