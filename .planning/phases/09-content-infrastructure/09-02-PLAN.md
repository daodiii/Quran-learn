---
phase: 09-content-infrastructure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/mdx/ArabicExample.astro
  - src/components/mdx/Callout.astro
autonomous: true

must_haves:
  truths:
    - "ArabicExample component displays Arabic text in RTL with proper font, transliteration, translation, and Quranic reference"
    - "Arabic text has letter-spacing: 0 to prevent letter disconnection"
    - "Callout component renders note, tip, caution, and warning variants with distinct colors and icons"
    - "Both components use CSS custom properties from the existing design system (--color-*, --spacing-*, --radius-*)"
    - "Both components use CSS logical properties (inline-start, block-end) for RTL compatibility"
  artifacts:
    - path: "src/components/mdx/ArabicExample.astro"
      provides: "Quranic verse display with transliteration, translation, reference, and grammar highlight"
      min_lines: 50
    - path: "src/components/mdx/Callout.astro"
      provides: "Educational callout boxes with note/tip/caution/warning variants"
      min_lines: 40
  key_links:
    - from: "src/components/mdx/ArabicExample.astro"
      to: "src/styles/tokens/colors.css"
      via: "CSS custom properties"
      pattern: "var\\(--color-"
    - from: "src/components/mdx/Callout.astro"
      to: "src/styles/tokens/colors.css"
      via: "CSS custom properties"
      pattern: "var\\(--color-"
---

<objective>
Create the ArabicExample and Callout educational components that lesson authors will use to display Quranic verses and highlight important grammar rules, tips, and warnings.

Purpose: These two components are the most frequently used across all 73 lessons. Every lesson has Arabic examples with translations, and most lessons use callouts for rules and tips. Getting these right early establishes the visual language for all lesson content.

Output: Two Astro components in `src/components/mdx/` ready for import into MDX lesson files.
</objective>

<execution_context>
@/Users/daodilyas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/daodilyas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-content-infrastructure/09-RESEARCH.md

Key codebase files to reference:
@src/components/mdx/ResponsiveImage.astro — existing MDX component pattern (Props interface, scoped styles with CSS custom properties)
@src/styles/tokens/colors.css — available CSS custom property names (--color-background-secondary, --color-border-primary, --color-text-primary, --color-text-secondary, --color-accent-primary)
@src/styles/tokens/spacing.css — spacing tokens (--spacing-xs through --spacing-3xl)
@src/layouts/LessonLayout.astro — shows existing Arabic text styling pattern (.lesson-arabic uses var(--font-arabic), direction: rtl, line-height: 2)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ArabicExample component for Quranic verse display</name>
  <files>src/components/mdx/ArabicExample.astro</files>
  <action>
    Create `src/components/mdx/ArabicExample.astro` following the pattern from the research file but adapted to match the existing codebase conventions.

    **Props interface:**
    ```typescript
    interface Props {
      arabic: string;           // Arabic text (fully vocalized with harakat)
      transliteration?: string; // Romanized pronunciation
      translation: string;      // English meaning
      reference?: string;       // Quranic reference (e.g., "Surah Al-Fatiha 1:2")
      highlight?: string;       // Comma-separated Arabic words to visually highlight
    }
    ```

    **Component structure:**
    - Outer `<div class="arabic-example">` — card-like container with border and background
    - Arabic text in `<p class="arabic-text" dir="rtl" lang="ar">` — uses var(--font-arabic), large size (1.5rem), line-height: 2, letter-spacing: 0
    - If `highlight` prop provided, wrap matching words in `<mark class="grammar-highlight">` within the Arabic text. Use a simple string split and match approach -- split arabic by spaces, check if each word is in the highlight list, wrap with mark if so. If highlight is not provided, render arabic text as-is.
    - Transliteration in `<p class="transliteration" dir="ltr">` — italic, monospace, secondary text color
    - Translation in `<p class="translation" dir="ltr">` — primary text color
    - Reference in `<p class="reference" dir="ltr">` — small, secondary, italic, with em-dash prefix

    **Styling requirements:**
    - Use ONLY CSS custom properties from the design system: `var(--color-background-secondary)`, `var(--color-border-primary)`, `var(--color-text-primary)`, `var(--color-text-secondary)`, `var(--color-accent-primary)`, `var(--spacing-*)`, `var(--radius-md)`
    - Use CSS logical properties: `margin-block`, `padding-inline`, `border-inline-start`, etc.
    - Arabic text MUST have `letter-spacing: 0` (critical -- Arabic letters connect, spacing breaks them)
    - Font for Arabic: `var(--font-arabic)` (already defined in the project as Amiri family)
    - Grammar highlight mark: light accent background (`var(--color-accent-primary-light)`), no change to font color
    - Scoped `<style>` block (Astro default scoping)
    - Use `:global()` only if targeting slotted content

    **Usage example (for documentation in a comment at top of file):**
    ```mdx
    <ArabicExample
      arabic="بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ"
      transliteration="bismi llahi r-rahmani r-rahim"
      translation="In the name of God, the Most Gracious, the Most Merciful"
      reference="Surah Al-Fatiha 1:1"
      highlight="بِسْمِ"
    />
    ```
  </action>
  <verify>
    File exists at `src/components/mdx/ArabicExample.astro`.
    File contains: Props interface with arabic/translation/reference/highlight fields.
    File contains: `letter-spacing: 0` rule for Arabic text.
    File contains: `dir="rtl"` on Arabic text element.
    File contains: CSS custom properties (no hardcoded colors).
    File contains: CSS logical properties (no left/right).
  </verify>
  <done>
    ArabicExample.astro is a complete Astro component that renders Arabic text with transliteration, translation, Quranic reference, and optional grammar word highlighting. Uses design system tokens and logical properties for RTL support.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Callout component for educational boxes</name>
  <files>src/components/mdx/Callout.astro</files>
  <action>
    Create `src/components/mdx/Callout.astro` following the research pattern but matching existing codebase conventions.

    **Props interface:**
    ```typescript
    interface Props {
      type?: 'note' | 'tip' | 'rule' | 'warning';
      title?: string;
    }
    ```

    Note: Use 'rule' instead of 'caution' from the research file. This is an educational app -- grammar rules are more relevant than cautions. The 4 types are:
    - `note` (blue) — general information
    - `tip` (purple) — helpful advice
    - `rule` (amber/gold) — grammar rules that must be remembered
    - `warning` (red) — common mistakes to avoid

    **Component structure:**
    - `<aside class="callout callout-{type}" role="note">` — semantic aside element
    - Title bar: `<p class="callout-title">` with icon span + strong text
    - Content: `<div class="callout-content"><slot /></div>` — accepts MDX children
    - Default titles if not provided: Note, Tip, Grammar Rule, Common Mistake
    - Icons: Use simple text/unicode characters (not emoji to avoid platform inconsistency). Use SVG inline icons instead:
      - note: info circle (i)
      - tip: lightbulb
      - rule: book/scroll
      - warning: triangle exclamation

    **Styling requirements:**
    - Left/start border accent (4px `border-inline-start`)
    - Semi-transparent background tint per type
    - Use design system spacing and radius tokens
    - `.callout-title` has uppercase, small font, flex with icon
    - `.callout-content` has comfortable line-height (1.6), handles nested markdown (paragraphs, lists, Arabic text)
    - `.callout-content :global(p:last-child)` removes bottom margin
    - Ensure Arabic text inside callouts inherits `letter-spacing: 0`
    - Color values for type variants: Use rgba() with appropriate semantic colors:
      - note: blue tones (59, 130, 246)
      - tip: purple tones (168, 85, 247)
      - rule: amber tones (245, 158, 11)
      - warning: red tones (239, 68, 68)
    - These colors work in both light and dark mode because they use rgba with transparency over the background

    **Usage example (comment at top of file):**
    ```mdx
    <Callout type="rule" title="The Definite Article">
      In Arabic, **al-** (ال) makes any noun definite. Unlike English, there is only one article for all genders and numbers.
    </Callout>

    <Callout type="warning">
      Don't confuse the sun letters with moon letters — they affect pronunciation but not spelling.
    </Callout>
    ```
  </action>
  <verify>
    File exists at `src/components/mdx/Callout.astro`.
    File contains: Props interface with type and title fields.
    File contains: 4 callout type variants (note, tip, rule, warning).
    File contains: `<slot />` for MDX children.
    File contains: `role="note"` for accessibility.
    File contains: CSS custom properties and logical properties.
  </verify>
  <done>
    Callout.astro is a complete Astro component with 4 educational variants (note, tip, rule, warning). Uses slot for MDX content, semantic HTML with ARIA role, and design system tokens. Ready for use in all 73 lessons.
  </done>
</task>

</tasks>

<verification>
1. Both components exist in `src/components/mdx/`
2. Both use CSS custom properties from the design system (no hardcoded colors)
3. Both use CSS logical properties (no left/right)
4. ArabicExample has `letter-spacing: 0` on Arabic text
5. ArabicExample has `dir="rtl"` on Arabic text elements
6. Callout uses `<slot />` for MDX content
7. Both have TypeScript Props interfaces
8. No JavaScript/client-side code needed (pure Astro components = zero JS)
</verification>

<success_criteria>
- ArabicExample.astro renders Arabic text with RTL direction, transliteration, translation, and optional reference
- ArabicExample.astro supports grammar word highlighting via highlight prop
- Callout.astro renders 4 distinct variants (note, tip, rule, warning) with visual differentiation
- Both components follow existing codebase patterns (Props interface, scoped styles, CSS custom properties)
- Both components are zero-JS Astro components (no client-side scripting needed)
</success_criteria>

<output>
After completion, create `.planning/phases/09-content-infrastructure/09-02-SUMMARY.md`
</output>
