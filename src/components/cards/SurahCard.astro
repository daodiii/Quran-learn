---
import Card from '../primitives/Card.astro';
import Badge from '../primitives/Badge.astro';

interface Props {
  name: string;           // English name (e.g., "Al-Fatiha")
  nameArabic: string;     // Arabic name (e.g., "الفاتحة")
  number: number;         // Surah number (1-114)
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  verseCount?: number;
  href: string;
  class?: string;
}

const {
  name,
  nameArabic,
  number,
  difficulty,
  verseCount,
  href,
  class: className = ''
} = Astro.props;

// Map difficulty to badge variant
const difficultyVariant = difficulty === 'beginner' ? 'success' : difficulty === 'intermediate' ? 'warning' : 'error';
---

<Card variant="elevated" href={href} class={`surah-card ${className}`}>
  <div class="surah-card-header">
    <Badge variant="info" size="sm">{number}</Badge>
    <Badge variant={difficultyVariant} size="sm">{difficulty}</Badge>
  </div>

  <div class="surah-card-content">
    <h3 class="surah-name-arabic" dir="rtl" lang="ar">{nameArabic}</h3>
    <p class="surah-name-english">{name}</p>
  </div>

  {verseCount && (
    <div class="surah-card-footer">
      <span class="surah-verse-count">{verseCount} verses</span>
    </div>
  )}
</Card>

<style>
  .surah-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-sm);
    margin-block-end: var(--spacing-md);
  }

  .surah-card-content {
    margin-block-end: var(--spacing-sm);
  }

  /* Critical Arabic typography for surah name */
  .surah-name-arabic {
    font-family: 'Amiri', serif;
    font-size: 1.5rem;
    font-weight: 700;
    direction: rtl;
    text-align: start;
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: none;
    letter-spacing: 0;
    color: var(--color-text-primary);
    margin: 0;
    margin-block-end: var(--spacing-xs);
    line-height: 1.4;
  }

  .surah-name-english {
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.3;
  }

  .surah-card-footer {
    padding-block-start: var(--spacing-sm);
    border-top: 1px solid var(--color-border-primary);
  }

  .surah-verse-count {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-tertiary);
  }

  /* Accessibility: reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .surah-card {
      transition: none;
    }
  }
</style>
