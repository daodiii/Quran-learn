---
import Card from '../primitives/Card.astro';
import Badge from '../primitives/Badge.astro';

interface Props {
  name: string;           // English name (e.g., "Al-Fatiha")
  nameArabic: string;     // Arabic name (e.g., "الفاتحة")
  number: number;         // Surah number (1-114)
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  verseCount?: number;
  href: string;
  class?: string;
  [key: string]: any; // Allow arbitrary HTML attributes
}

const {
  name,
  nameArabic,
  number,
  difficulty,
  verseCount,
  href,
  class: className = '',
  ...rest
} = Astro.props;

// Map difficulty to badge variant
const difficultyVariant = difficulty === 'beginner' ? 'success' : difficulty === 'intermediate' ? 'warning' : 'error';
---

<Card variant="elevated" href={href} class={`surah-card ${className}`} {...rest}>
  <div class="surah-card-header">
    <Badge variant="info" size="sm">{number}</Badge>
    <Badge variant={difficultyVariant} size="sm">{difficulty}</Badge>
  </div>

  <div class="surah-card-content">
    <h3 class="surah-name-arabic" dir="rtl" lang="ar">{nameArabic}</h3>
    <p class="surah-name-english">{name}</p>
  </div>

  {verseCount && (
    <div class="surah-card-footer">
      <span class="surah-verse-count">{verseCount} verses</span>
    </div>
  )}
</Card>

<style>
  .surah-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-sm);
    margin-block-end: var(--spacing-lg);
  }

  .surah-card-content {
    margin-block-end: var(--spacing-lg);
    text-align: center;
  }

  /* Critical Arabic typography for surah name */
  .surah-name-arabic {
    font-family: var(--font-arabic);
    font-size: 2.25rem;
    font-weight: 700;
    direction: rtl;
    color: var(--color-text-primary);
    margin: 0;
    margin-block-end: var(--spacing-xs);
    line-height: 1.2;
  }

  .surah-name-english {
    font-family: var(--font-display);
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--accent-gold);
    margin: 0;
    line-height: 1.2;
    letter-spacing: -0.01em;
    transition: color var(--transition-fast, 0.2s ease);
  }

  .surah-card-footer {
    padding-block-start: var(--spacing-md);
    border-top: 2px solid var(--accent-gold);
    display: flex;
    justify-content: center;
  }

  .surah-verse-count {
    font-family: var(--font-display);
    font-size: 0.8125rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-text-tertiary);
  }

  /* Accessibility: reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .surah-card {
      transition: none;
    }
  }
</style>
